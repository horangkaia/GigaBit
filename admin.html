<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>AutoPCare Offline Admin</title>
<style>
  body{background:#111;color:#fff;font-family:Arial;padding:24px}
  .card{background:#222;padding:18px;border-radius:10px;width:700px;margin:auto}
  input,select,button{padding:10px;margin-top:8px;width:100%;border-radius:8px;font-size:14px}
  button{background:#27ae60;border:none;color:#fff;font-weight:bold;cursor:pointer}
  pre{background:#000;padding:10px;border-radius:8px;margin-top:12px;white-space:pre-wrap}
</style>
</head>
<body>
<div class="card">
  <h2>AutoPCare â€” Offline Admin License Generator</h2>

  <label>Owner Password</label>
  <input id="pw" type="password" placeholder="Required">

  <label>Tipe License</label>
  <select id="type">
    <option value="single">single</option>
    <option value="global">global</option>
  </select>

  <label>Durasi (hari)</label>
  <select id="days">
    <option value="30">30 hari</option>
    <option value="180">180 hari</option>
    <option value="365">365 hari</option>
    <option value="9999">Lifetime</option>
  </select>

  <label>HWID (opsional)</label>
  <input id="hwid" placeholder="Untuk single saja (global -> kosongkan)">

  <button id="btnGen">Generate Key</button>

  <pre id="out">Output akan tampil di sini.</pre>
</div>

<script>
// ===============
// CONFIG
// ===============
const OWNER_PASSWORD = "admin123";     // ganti sendiri
const SECRET_KEY = "MY_SUPER_SECRET";  // ganti sendiri

// WebCrypto utility
async function sha256(message){
  const data = new TextEncoder().encode(message);
  const hash = await crypto.subtle.digest("SHA-256", data);
  return Array.from(new Uint8Array(hash)).map(x=>x.toString(16).padStart(2,"0")).join("");
}

document.getElementById("btnGen").onclick = async () => {
  const pw = document.getElementById("pw").value.trim();
  if (pw !== OWNER_PASSWORD) {
    alert("Password salah!");
    return;
  }

  const type = document.getElementById("type").value;
  const days = parseInt(document.getElementById("days").value);
  const hwid = document.getElementById("hwid").value.trim() || "*";

  const expires = Math.floor(Date.now()/1000) + (days * 86400);

  const msg = `${type}|${hwid}|${expires}|${SECRET_KEY}`;
  const signature = await sha256(msg);

  const key = `APC|TYPE=${type}|HWID=${hwid}|EXP=${expires}|SIG=${signature}`;

  document.getElementById("out").textContent = key;

  try {
    await navigator.clipboard.writeText(key);
  } catch {}

};
</script>
</body>
</html>
